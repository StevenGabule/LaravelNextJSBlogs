{"version":3,"sources":["webpack:///./resources/js/modules/user/pages/edit/Page.js","webpack:///./resources/js/modules/user/pages/edit/components/Form.js","webpack:///./resources/js/modules/user/pages/edit/index.js","webpack:///./resources/js/modules/user/service.js","webpack:///./resources/js/modules/user/store/actions.js"],"names":["Page","props","validator","ReeValidate","user","toJson","state","handleChange","bind","handleSubmit","nextProps","_","isEqual","setState","name","value","e","preventDefault","errors","submit","dispatch","userUpdateRequest","error","statusCode","forOwn","message","field","add","Component","PropTypes","object","isRequired","func","displayName","propTypes","onChange","onSubmit","Form","target","email","phone","about","mapStateToProps","User","connect","params","Promise","resolve","reject","Http","patch","id","Transformer","send","then","res","userActions","fetch","data","err","response","status","resetErrors","replace","searchStr","replaceStr","resetValidationFields","userUpdate","payload","type","USER_UPDATE","unsetUser","USER_UNSET"],"mappings":"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","file":"1.js","sourcesContent":["// import libs\nimport React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport _ from 'lodash'\nimport { userUpdateRequest } from '../../service'\nimport ReeValidate from 'ree-validate'\n\n// import components\nimport Form from './components/Form'\n\nclass Page extends Component {\n    static displayName = 'UserPage'\n    static propTypes = {\n        user: PropTypes.object.isRequired,\n        dispatch: PropTypes.func.isRequired,\n    }\n\n    constructor(props) {\n        super(props)\n\n        this.validator = new ReeValidate({\n            'name': 'required|min:3',\n            'email': 'required|email',\n            'phone': 'min:8|numeric',\n            'about': 'min:10|max:1024',\n        })\n\n        const user = this.props.user.toJson()\n\n        this.state = {\n            user\n        }\n\n        this.handleChange = this.handleChange.bind(this)\n        this.handleSubmit = this.handleSubmit.bind(this)\n    }\n\n    componentWillReceiveProps(nextProps) {\n        const user = nextProps.user.toJson()\n\n        if (!_.isEqual(this.state.user, user)) {\n            this.setState({ user })\n        }\n\n    }\n\n    handleChange(name, value) {\n        this.setState({ user: { ...this.props.user, [name]: value} })\n    }\n\n    handleSubmit(e) {\n        e.preventDefault()\n        const user = this.state.user\n        const { errors } = this.validator\n\n        /*this.validator.validateAll(user)\n            .then((success) => {\n                if (success) {\n\n                } else {\n                    this.setState({ errors })\n                }\n            })*/\n        this.submit(user)\n    }\n\n    submit(user) {\n        this.props.dispatch(userUpdateRequest(user))\n            .catch(({ error, statusCode }) => {\n                const { errors } = this.validator\n\n                if (statusCode === 422) {\n                    _.forOwn(error, (message, field) => {\n                        errors.add(field, message);\n                    });\n                }\n\n                this.setState({ errors })\n            })\n    }\n\n    render() {\n        return <main className=\"col-sm-9 ml-sm-auto col-md-10 pt-3\" role=\"main\">\n            <h1>Profile</h1>\n\n            <section className=\"row\">\n                <div className=\"col-12 col-md-9 col-sm-12\">\n                    <Form {...this.state}\n                          onChange={this.handleChange}\n                          onSubmit={this.handleSubmit}/>\n                </div>\n            </section>\n        </main>\n    }\n}\n\nexport default Page\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nconst displayName = 'UserFrom'\nconst propTypes = {\n    user: PropTypes.object.isRequired,\n    onChange: PropTypes.func.isRequired,\n    onSubmit: PropTypes.func.isRequired,\n}\n\nconst Form = ({ user, onChange, onSubmit }) => {\n    return <form onSubmit={e => onSubmit(e)}>\n        <div className=\"form-group row\">\n            <label htmlFor=\"name\" className=\"col-sm-2 col-form-label\">Name</label>\n            <div className=\"col-sm-10\">\n                <input type=\"text\"\n                       id=\"name\"\n                       name=\"name\"\n                       className={`form-control`}\n                       placeholder=\"Full Name\"\n                       value={user.name || ''}\n                       onChange={e => onChange(e.target.name, e.target.value)} />\n            </div>\n        </div>\n        <div className=\"form-group row\">\n            <label htmlFor=\"email\" className=\"col-sm-2 col-form-label\">Email</label>\n            <div className=\"col-sm-10\">\n                <input type=\"email\"\n                       id=\"email\"\n                       name=\"email\"\n                       className={`form-control`}\n                       placeholder=\"Email\"\n                       value={user.email || ''}\n                       onChange={e => onChange(e.target.name, e.target.value)}/>\n            </div>\n        </div>\n        <div className=\"form-group row\">\n            <label htmlFor=\"phone\" className=\"col-sm-2 col-form-label\">Phone</label>\n            <div className=\"col-sm-10\">\n                <input type=\"text\"\n                       id=\"phone\"\n                       name=\"phone\"\n                       className={`form-control`}\n                       placeholder=\"Phone\"\n                       value={user.phone || ''}\n                       onChange={e => onChange(e.target.name, e.target.value)}/>\n            </div>\n        </div>\n        <div className=\"form-group row\">\n            <label htmlFor=\"about\" className=\"col-sm-2 col-form-label\">About</label>\n            <div className=\"col-sm-10\">\n        <textarea id=\"about\"\n                  name=\"about\"\n                  className={`form-control`}\n                  rows=\"3\"\n                  placeholder=\"About\"\n                  value={user.about || ''}\n                  onChange={e => onChange(e.target.name, e.target.value)} />\n            </div>\n        </div>\n        <div className=\"form-group row\">\n            <div className=\"col-sm-10 ml-auto\">\n                <button type=\"submit\" className=\"btn btn-primary\">Update</button>\n            </div>\n        </div>\n    </form>\n}\n\nForm.displayName = displayName\nForm.propTypes = propTypes\n\nexport default Form\n","/* ============\n * Container\n * ============.\n *\n * Containers are used fetch the data from state\n * and disperse to the components.\n */\n\n// import libs\nimport { connect } from 'react-redux'\nimport User from '../../User'\n\n// import components\nimport Page from './Page'\n\n// map store state as properties of the component\nconst mapStateToProps = state => {\n    return {\n        user: new User(state.user)\n    }\n}\n\n// binding store with component\nexport default connect(mapStateToProps)(Page)\n","import Http from '../../utils/Https'\nimport Transformer from '../../utils/Transformer'\nimport * as userActions from './store/actions'\n\nexport function userUpdateRequest(params) {\n    return dispatch => (\n        new Promise((resolve, reject) => {\n            Http.patch(`/users/${params.id}`, Transformer.send(params))\n                .then(res => {\n                    dispatch(userActions.userUpdate(Transformer.fetch(res.data.user)))\n                    return resolve()\n                })\n                .catch((err) => {\n                    const statusCode = err.response.status;\n                    const data = {\n                        error: null,\n                        statusCode,\n                    };\n\n                    if (statusCode === 422) {\n                        const resetErrors = {\n                            errors: err.response.data,\n                            replace: false,\n                            searchStr: '',\n                            replaceStr: '',\n                        };\n                        data.error = Transformer.resetValidationFields(resetErrors);\n                    } else if (statusCode === 401) {\n                        data.error = err.response.data.message;\n                    }\n                    return reject(data);\n                })\n        })\n    )\n}\n","/* ============\n * Actions for the user module\n * ============\n *\n * The actions that are available on the\n * user module.\n */\n\nimport {\n    USER_UPDATE,\n    USER_UNSET,\n} from './action-types';\n\nexport function userUpdate(payload) {\n    return {\n        type: USER_UPDATE,\n        payload,\n    };\n}\n\nexport function unsetUser() {\n    return {\n        type: USER_UNSET,\n    }\n}\n\n"],"sourceRoot":""}